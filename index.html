<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>家国梦建筑摆放计算器</title>
    <link href="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div id="app" class="container">
        <h1 class="mb-4">家国梦计算器 V0.2</h1>
        <div>
            <h3 class="mb-3">配置建筑及星级</h3>
            <div class="row mb-5">
                <div v-for="types in buildings" class="col-4">
                    <h5>{{types.type}}</h5>
                    <table class="table table-bordered table-sm">
                        <thead>
                        <tr>
                            <th class="text-center">名称</th>
                            <th class="text-center">星级</th>
<!--                            <th class="text-center">等级</th>-->
                            <th class="text-center">任务加成</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="item in types.list" :class="[{ 'table-primary': item.rarity===rarity.Common }, { 'table-rare': item.rarity===rarity.Rare },{ 'table-warning': item.rarity===rarity.Legendary }]">
                            <td class="text-nowrap text-center">{{item.BuildingName}}</td>
                            <td>
                                <select v-model="item.star" class="form-control form-control-sm">
                                    <option value="0">无</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </td>
<!--                            <td class="text-center"></td>-->
                            <td>
                                <div class="input-group input-group-sm">
                                    <input v-model="item.quest" type="number" class="form-control text-right">
                                    <div class="input-group-append">
                                        <span class="input-group-text">%</span>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <h3 class="mb-3">任务、政策及游记加成<small class="text-muted">家国之光、国庆buff属于政策加成</small></h3>
            <div class="row mb-5">
                <div class="col-4" v-for="buffSource in buffs">
                    <h5>{{buffSource.type}}</h5>
                    <table class="table table-bordered table-sm">
                        <thead>
                        <tr>
                            <th class="text-center">加成类型</th>
                            <th class="text-center">加成比例</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="buff in buffSource.list">
                            <td class="text-center text-nowrap">{{buff.target}}</td>
                            <td>
                                <div class="input-group input-group-sm">
                                    <input v-model="buff.buff" type="number" class="form-control text-right">
                                    <div class="input-group-append">
                                        <span class="input-group-text">%</span>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <h3 class="mb-3">操作</h3>
            <div class="mb-5">
                <button type="button" @click="calculation" :disabled="calculationing" :class="{disabled:calculationing}" class="btn btn-primary">{{calculationing?"计算中...":"计算结果"}}</button>
                <button type="button" @click="save" :disabled="calculationing" :class="{disabled:calculationing}" class="btn btn-success">保存参数</button>
                <button type="button" @click="clear" :disabled="calculationing" :class="{disabled:calculationing}" class="btn btn-danger">清除存档</button>
                <button type="button" @click="stop" v-if="calculationing" class="btn btn-danger">停止计算</button>
            </div>
            <h3 class="mb-3">结果</h3>
            <div class="row">
                <div class="col-12" v-if="calculationing">
                    <div class="alert alert-info" role="alert">
                        <h4 class="alert-heading">正在计算，请稍候...</h4>
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped bg-info progress-bar-animated" role="progressbar" :style="{ width:  progress + '%' }"></div>
                        </div>
                    </div>
                </div>
                <div class="col-3" v-if="programs.onlineMoney.online>0">
                    <h5>在线金币优先策略</h5>
                    <table class="table table-bordered table-sm">
                        <thead>
                        <tr>
                            <th>在线</th>
                            <th>离线</th>
                            <th>供货</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>{{programs.onlineMoney.online}}/s</td>
                            <td>{{programs.onlineMoney.offline}}/s</td>
                            <td>{{programs.onlineMoney.supply}}%</td>
                        </tr>
                        </tbody>
                    </table>
                    <table class="table table-bordered table-sm">
                        <thead>
                        <tr>
                            <th>建筑</th>
                            <th>在线</th>
                            <th>离线</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="building in programs.onlineMoney.buildings" :class="[{ 'table-primary': building.building.rarity===rarity.Common }, { 'table-rare': building.building.rarity===rarity.Rare },{ 'table-warning': building.building.rarity===rarity.Legendary }]">
                            <td>{{building.building.BuildingName}}</td>
                            <td>{{building.online}}/s</td>
                            <td>{{building.offline}}/s</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-3" v-if="programs.supplyMoney.online>0">
                    <h5>供货优先、金币次之策略</h5>
                    <table class="table table-bordered table-sm">
                        <thead>
                        <tr>
                            <th>在线</th>
                            <th>离线</th>
                            <th>供货</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>{{programs.supplyMoney.online}}/s</td>
                            <td>{{programs.supplyMoney.offline}}/s</td>
                            <td>{{programs.supplyMoney.supply}}%</td>
                        </tr>
                        </tbody>
                    </table>
                    <table class="table table-bordered table-sm">
                        <thead>
                        <tr>
                            <th>建筑</th>
                            <th>在线</th>
                            <th>离线</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="building in programs.supplyMoney.buildings" :class="[{ 'table-primary': building.building.rarity===rarity.Common }, { 'table-rare': building.building.rarity===rarity.Rare },{ 'table-warning': building.building.rarity===rarity.Legendary }]">
                            <td>{{building.building.BuildingName}}</td>
                            <td>{{building.online}}/s</td>
                            <td>{{building.offline}}/s</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-3" v-if="programs.supplyRarity.online>0">
                    <h5>供货优先、橙色次之策略</h5>
                    <table class="table table-bordered table-sm">
                        <thead>
                        <tr>
                            <th>在线</th>
                            <th>离线</th>
                            <th>供货</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>{{programs.supplyRarity.online}}/s</td>
                            <td>{{programs.supplyRarity.offline}}/s</td>
                            <td>{{programs.supplyRarity.supply}}%</td>
                        </tr>
                        </tbody>
                    </table>
                    <table class="table table-bordered table-sm">
                        <thead>
                        <tr>
                            <th>建筑</th>
                            <th>在线</th>
                            <th>离线</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="building in programs.supplyRarity.buildings" :class="[{ 'table-primary': building.building.rarity===rarity.Common }, { 'table-rare': building.building.rarity===rarity.Rare },{ 'table-warning': building.building.rarity===rarity.Legendary }]">
                            <td>{{building.building.BuildingName}}</td>
                            <td>{{building.online}}/s</td>
                            <td>{{building.offline}}/s</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-3" v-if="programs.offlineMoney.online>0">
                    <h5>离线金币优先策略</h5>
                    <table class="table table-bordered table-sm">
                        <thead>
                        <tr>
                            <th>在线</th>
                            <th>离线</th>
                            <th>供货</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>{{programs.offlineMoney.online}}/s</td>
                            <td>{{programs.offlineMoney.offline}}/s</td>
                            <td>{{programs.offlineMoney.supply}}%</td>
                        </tr>
                        </tbody>
                    </table>
                    <table class="table table-bordered table-sm">
                        <thead>
                        <tr>
                            <th>建筑</th>
                            <th>在线</th>
                            <th>离线</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="building in programs.offlineMoney.buildings" :class="[{ 'table-primary': building.building.rarity===rarity.Common }, { 'table-rare': building.building.rarity===rarity.Rare },{ 'table-warning': building.building.rarity===rarity.Legendary }]">
                            <td>{{building.building.BuildingName}}</td>
                            <td>{{building.online}}/s</td>
                            <td>{{building.offline}}/s</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
</body>
</html>